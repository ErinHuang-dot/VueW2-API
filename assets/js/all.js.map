{"version":3,"sources":["all.js"],"names":["url","path","login","Vue","createApp","data","user","username","password","methods","axios","post","then","res","token","expired","document","cookie","Date","window","location","href","alert","error","mount","product","temp","products","checkLogin","getProducts","get","mounted","replace","defaults","headers","common"],"mappings":"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","file":"all.js","sourcesContent":["// ------Vue------\nconst url = 'https://vue3-course-api.hexschool.io/v2';\nconst path = 'erinhuang-lab';\n\n// 登入頁\nconst login = Vue.createApp({\n  data() {\n    return {\n      user: {\n        username: \"\",\n        password: \"\"\n      },\n    }\n  },\n\n  methods: {\n    login() {\n      axios.post(`${url}/admin/signin`, this.user)\n        .then ((res) => {\n\n          const { token, expired } = res.data;\n          document.cookie = `erinToken=${token}; expires=${new Date(expired)}GMT;`;\n\n          window.location.href = 'products.html';\n          window.alert('登入成功，即將進入商品頁面'); \n        })\n        .catch ((error) => {\n          window.alert('登入失敗，請重新輸入一次'); \n        })\n    }\n  }\n}).mount('#login');\n\n\n\n\nconst product = Vue.createApp({\n  data() {\n      return {\n          temp: {},\n          products: []\n      }\n  },\n\n  methods: {\n    checkLogin() {\n      axios.post(`${url}/api/user/check`)\n        .then ((res) => {\n          this.getProducts();\n        })\n        .catch ((error) => {\n          window.alert('驗證失敗，請重新登入');\n          window.location.href = 'index.html';\n        })\n    },\n    getProducts() {\n      axios.get(`${url}/api/${path}/admin/products`)\n        .then ((res) => {\n          this.products = res.data.products;\n        })\n        .catch ((error) => {\n          window.alert(error);\n        })\n    },\n  },\n\n  mounted() {\n    const token = document.cookie.replace(/(?:(?:^|.*;\\s*)erinToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n    axios.defaults.headers.common['Authorization'] = token;\n\n    this.checkLogin();\n  }\n}).mount('#product');\n\n\n\n\n\n// ------JS練習------\n\n// const url = 'https://vue3-course-api.hexschool.io/v2';\n// const path = 'erinhuang-lab';\n\n// const inputEmail = document.querySelector('#floatingEmail');\n// const inputPassword = document.querySelector('#floatingPass');\n// const btnLogin = document.querySelector('#btnLogin');\n// const btnCheckLogin = document.querySelector('#btnCheckLogin');\n\n// const btnGetProducts = document.querySelector('#getProducts');\n// const btnAddProduct = document.querySelector('#addProduct');\n// const btnDeleteProduct = document.querySelector('#deleteProduct');\n\n// ---登入頁面\n// btnLogin.addEventListener('click', login);\n\n// function login() {\n//   const username = inputEmail.value;\n//   const password = inputPassword.value;\n\n//   const user = {\n//     username,\n//     password\n//   }\n \n//   // 登入 API\n//   axios.post(`${url}/admin/signin`, user)\n//     .then((res) => {\n//       console.log(res.data);\n    \n//       // 使用 cookie 儲存資訊\n//       const { token, expired} = res.data;\n//       document.cookie = `erinToken=${token}; expires=${new Date(expired)}GMT;`;\n\n//       window.location.href = 'products.html';\n//     })\n//     .catch((error) => {\n//       console.log(error);\n//     })\n\n// }\n\n\n// btnCheckLogin.addEventListener('click', checkLogin);\n// function checkLogin() {\n\n//   // 使用驗證登入的API，檢視回傳訊息\n//   axios.post(`${url}/api/user/check`)\n//     .then((res) => {\n//       console.log(res.data);\n//       window.location.href = 'products.html';\n//     })\n//     .catch((error) => {\n//       console.dir(error);\n//     })\n// }\n\n// // 取得 token\n// const token = document.cookie.replace(/(?:(?:^|.*;\\s*)erinToken\\s*\\=\\s*([^;]*).*$)|^.*$/, \"$1\");\n\n// // 在 axios headers 加入 token 資訊\n// axios.defaults.headers.common['Authorization'] = token;\n\n\n// // ---產品頁面－取得產品列表資料\n// btnGetProducts.addEventListener('click', getProducts);\n// function getProducts() {\n//   // 管理控制台API，一定要登入才能運作\n//   axios.get(`${url}/api/${path}/admin/products`)\n//     .then((res) => {\n//       console.log(res.data);\n//     })\n//     .catch((error) => {\n//       console.dir(error);\n//     })  \n\n// }\n\n// // ---產品頁面－新增產品\n// btnAddProduct.addEventListener('click', addProduct);\n// function addProduct() {\n\n//   const product = {\n//     data: {\n//       // id: -Mu4zmvEnoJWF_P2O7BQ\n//       title: \"草莓莓果夾心圈\",\n//       category: \"甜甜圈\",\n//       origin_price: 150,\n//       price: 99,\n//       unit: \"個\",\n//       description: \"濃郁的草莓風味，中心填入滑順不膩口的卡士達內餡，帶來滿滿幸福感！\",\n//       content: \"尺寸：14x14cm\",\n//       is_enabled: 1,\n//       imageUrl: \"https://images.unsplash.com/photo-1583182332473-b31ba08929c8?ixid=MnwxMjA3fDB8MHxzZWFyY2h8NzR8fGRvbnV0fGVufDB8fDB8fA%3D%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=700&q=60\",\n//       imagesUrl: [\n//         \"https://images.unsplash.com/photo-1626094309830-abbb0c99da4a?ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&ixlib=rb-1.2.1&auto=format&fit=crop&w=2832&q=80\",\n//         \"https://images.unsplash.com/photo-1559656914-a30970c1affd?ixid=MnwxMjA3fDB8MHxzZWFyY2h8MTY0fHxkb251dHxlbnwwfHwwfHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=700&q=60\",\n//       ]\n//     }\n    \n//   }\n\n//   // 新增產品 API(一次只能建立一筆資料)\n//   axios.post(`${url}/api/${path}/admin/product`, product)\n//   .then((res) => {\n//     console.log(res.data);\n//   })\n//   .catch((error) => {\n//     console.dir(error);\n//   })  \n// }\n\n// // ---產品頁面－刪除產品\n// btnDeleteProduct.addEventListener('click', deleteProduct);\n// function deleteProduct() {\n\n//   axios.delete(`${url}/api/${path}/admin/product/-Mu4zmvEnoJWF_P2O7BQ`)\n//   .then((res) => {\n//     console.log(res.data);\n//   })\n//   .catch((error) => {\n//     console.dir(error);\n//   })  \n// }\n"]}